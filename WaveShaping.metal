//
//  waveshaping.metal
//  swatch
//
//  Created by Eli Hutton on 8/11/14.
//  Copyright (c) 2014 hutdev. All rights reserved.
//

#include <metal_stdlib>
using namespace metal;

constexpr for waveshaping with protected: max && msp using__pY__

class: waveshaping for swatch

7092.3oc6c08iiibb+4c+qfP3dxdFc82cSGffbI4k.DiD.CD+fOiEbj3ngdk
Dkon141yv6e6o+hrHkDknjH4xYNg8tYzPIQV+pt55qt5p+Ge7CSdJ8Wh2NI3
OD7WB9vG9Ge7CevdIyE9f+u+vjUQ+xrkQaserIqieM8o+1jGbuUd7ujau7u6
aAjhKltKeYbd9W2D6twS1lrXczxIA+U+GX8tUIq0eD6cj3u3yoqy2l7q1uCl
LE4u7ln7Yujrdwmxhmk6teDkXpfRoH7CAXrT+QCnjo7GBHnonxGh49sNZk89
M4mxRzDf+cRlaulFFOxXS.ZxQ2VhBat3+7iez7iGdCwYXgSQZNSGvXv8NiwP
1eKfAOoKi6PuXtCkvlRLxMxGBTgSIZFi.aXRWA6QzcrmYoqVEuN+.9y5zjsw
EWcSV7V8GJJOIccUHIlJ0v.ycvgoN.N03Y3Klmw8O.E0bm4pKfc8b1hmLWEA
2+JfnJ4TkwxONiE0cxc+9flk3RziCc0jQ+LPBheKSDoCfj11+9tnr1Jpwv8r
nlfX+c+KqQwcmrVir1nWaIekPc7Uo8O6CFKiMTLVd+yXy0T45EKaqTqdRX+J
0pG9FHlKZ.jZSV2RFqR1aRsVsmXj6Az+7Ux.nM3+Y6rjkKixSyNC2EKLvUfr
bUYnE6rKh2JNEukYuiJjk0pDGb66ZVaGJxlEMOIcQV5tMshE5kOwVwmPRELl
97yaiseVrpI2AlbZFdyF8KDaOxysM7KYC17KetY5Am73rOEuN5okVpsX3HIO
dUABJtVgPA2+2eIZ4tZef4IaM2m4NLnoX3+B9qcmmWVOZ+104t+kq.gpctWY
BFhVFMDSbct6S5+vD2FuTS4oYeKfGbkQDItbWTkTfEw3Nli7J4QzdmGos4On
ALVIbZe7h7qLdw9OZZsil2.u4xitghPVST1vZDjqisn5c1xruNaY7fxXpMmx
aFPntRwFYuyfdNKc01ut5ozkStRqfWfKcLjQZgwYVthjdcbkPT2wUVEucazh
3CmNoUEGG7C3Kkob4xKBhXJ0KuPYtvTzLHjy4gKb9D98k7hvIgD58C9JkWj7
9OEJ+2oQyOmCoD6nJQxmRMvgJ67XQYXy7KpR4jhB66XlDCPrn+onubtXQCw8
Mi0YliPjSGD9JOr63qFF4S6xy0OryIe5rREFNUXDeHtoa3oXBGhZ5fI6O39+
ZYNsbvqpey2x.f.AJIYXjabV6SOVHDJo8kJIPkOsXV5RcP1tvYlxoJFW6DGZ
pJjRTDyqDgHgYYRZ0f3SKR+RbV86o.gERycRhvgB6cWHBUDR8aZaFsaP+D8T
g6M.RB10KoiDDncjf.WYiR48mLfXjJCvTFtZ2HDPlzopie+IDHGoBAZOu5HQ
.7jN0Um2eh.pQlHPX330o.s6XENEPXVWyzgLIJDCpF8TMg.q2hFIAhJzNpwB
YrP9HQ..MJE.Fi9BHPLqZo2KC8rvw4P+nzE.Esb398i.fbbJ.LBM+6CH+8xH
OlLLi7Mkjk+yXSVvimGjmF7Tbvts5Wlr9mWWkzCVkNOdZPw2cYx53Yo6VmWM
smla3g7bj1UKlv9JLITPqyddZ2SdDgOmvwyQyhaTfgcJAFIqdXitLxapwf1L
1aovsIyiqkh2CxrS0ATbuWGa+tuYjAG306gPsZAXW4B9fIx9OWryyhdMHJHO
KZ81miyBdd25Y14dGSxkdZMfLhC1X+54WrHocWtEotzZSQt5+RZmyvj8WxEw
Dw.j0Vmz2oYtDTnc0Cco2Wv55xbAiPdmVsrXQuWnKXT+W9paz5nezRK4Olrd
d7uz+qCCSGrc4RTg4tBb4ZWIbD9bE2h94Gm4YLdNi9lmrLVa.dacl+GlDsYS
kK+gJeEC67u4rD4qLBykRV6tDt7RYweIo36CevnLMWHWyB1k4.zuHXSbuodH
7iEe0RQYKWQ3BV1s.ArpRZFGHVlN6ytZrAUbwzMwqSVuujU4aOO94ncKy+zw
Gpp+9E1FO5adzgkOLYQVx7z0Fhn12zb4hGmdVja.mWEL1Ow5nMG4KuUiicae
JJyvU8F1IEuYdZ5x5uU4.odxPz5jUQ4w4INhkfJuoIq1jk3TXWdMmmPurcVV
5xk0tUt24KG4clqGqmE+Zx77WpM417N5OdxlhgfIk7n4IKh2lW+Z4QK1V+J0
1GMUEBqNKu10O0r85y3Wn4IAnpuUyS0azT+Ilx2nS1npRyr8mue547Grn8jI
0ov8M9+gBMj9oXcOe7zrvpArzkbQSoGWlZRk536EfKjWh+tyKyCVFfOsH4Cm
imhuZdpvl7WrykzalahZlaRFFtoQU51WRy+1Y3oOuLMpejRU9E315WuTbay0
KK3huexmy1k8kxRM8jAHoESeJZ8hSvUo2HWEyIE9zeKb0xUGpmkSs.+Zs1zp
ItLugkheV61Uclo5DxQUdmhfPrVj6PNg6wMoM5uZz7IkF1RvF1LXQW.XAmzL
w41fOIVx079GmKrMcW1rhQ6hQhf5jt1go7j0k9r9W.ko68AeIY9759HteImi
Z0X1ESyj1RygiGZF2VZlLdnYyPN9MHM2F9rQo6HglMVUaurAdTPyV1WqjMvi
F97QFxONMejAjqilc6wlx7JLYazWhm+I8iPaK4SQ44YIOsK2oJuZJQt0n+Oe
1EtfPhOJQbhGdSOzEKSeJZoOIPke2iD48GAlX2jXsGGn8ENyEPMG4JV2qsAM
f5+Do+erLY1mMKITz74AoYAqR+RbvlTMyX6zf+zKIOm+6mU7Qxhq9t+75eZY
9uedVzBy6YcFOv5NxzilD9vikm3KIM89LISUgtkpF61nuL5EkLYbaxSuzUHD
BWVwv8Yh5Qj9OQ8+z7nUA+wcYYQe0jvM4iDDl8ymagg4V23c4DBKYc8Zh3py
ZgKtoic+658Tc2wmaZCkn4+a1sMwPDS0u9rqLhkA6ZOIXL5fsCR+seTXtczk
KU1G6Q2LuuMk3P+uIACdpQ030Bz+lWUDGiJjTrpRWiZbd+uUl9W94L8mKXYz
t0yd4orzW2FmE7Rd9l+vO9iu95qS2Sx7G2l9b9qQYw+n9asZ6lStd+8sXnzU
zITm1VJ9RYuCPyS4+Zcdb1lzkZo90KB9yZW219Rzl3ysC+c.C6Da7Kxr7hzf
pN8x0au8tD4QjGb66XEnxdeYOy0gQfCdJfn+ep9+YmXZtwasGJ+kcR+E8mck
FBgxqavsq97YW8J1viGm6F1cb2koQycbhgPyYAewYbQb0qjbuaKwvVLpUC3C
3li0UFHW4tvG2+6B+DPIX+FmD169mu.juRFR+6wgV+3l30yC1FmOOcUTx5AS
XwyavjqcJDu+a+glkoCMHBLELEmsON+J4IcnOCOuLUeSlT11UfDZjX8Z3QSo
o837cm0YAe4tpXtva8KfB5TAD3VqvCLoooujUZZxDSMXhuaDGUthr7Phau8f
ixTst1Bm8vW0NW7xyR1NKxWGrSCufXpaX+0THs8xdUvplvjHtR8vQeUUhUy.
KXrUyiP2T2tmWyy.TEX97VQroZQgtxoWgc2zqsKSlCNZWc5kq93p+9MsG2bM
ZLpYGFa2kC1MUhhNk2lfsSyRpJwQNEqVeo8kNZjI6lviORUJalVqInM6xqU0
bMH5WLzROVQJSHWQelpKqjwEwqiyhxiezzv4HCiymXjqa0P0+xVRunqLzcB+
cYgLxbQb6bof556dzpcvr6kx38RY7pKzoRmiutBb55KYLru7avtcwzMVgSe+
K.uCM8ew0pyMvLQN9mxpjPdikFJYDTMiOcRl3YJPranPFkUXfjaiMR+9KSFM
6yAHspnguVkKjHcyxEnaiUx9tyJsQ2n4kLFJ3QwThJv7iqkuJtU0lXoxY4De
i0v32cF6teMoR2.7DS22K2v8gPqa1OF2Pu0+xXshlYsz2JUGpKRLV6JXR4a4
hC0quhR4sCrpto3P6EamIAImcmUziaF.OqDyDcgp+vKqHq6mpsskEMGe7TOk
srj4XimporkTLczPwZE7Aj1TJkiJJtMxwpVRwqRl6puLe2ovoB0kjLL1VSRz
pkpxPUvnsTTZ7ThqrVRwimB1l1RJVLZn31t6CTiFJFeAJww2K642Zk87gc8m
pqXRsLvexpRrrWvIXmeUHOc6.x7PC9ktpmPUlYeJ0mY+KYMp52F7CYf5umsa
oVvCyRsnbE3ysuRKpeCrRKtdctoUabekVtuRKukWoEpKSVX78UZ4lYlg9R2k
cegVtsEZAcegV5jbV6EHca8m2YqyBcJlEX9w2g0YwozD6Jqp6qyR2tNKNlpq
dh4h6qyBpREU+9dcVbpqndWRtuLK2pmH2Wkk6qxx8UY42Rqxhuk041Jgl0Zk
6+q6qxx8UY49prbeUVtuJKW1prfa0prTdpazMqxxjtMi9iwUXYfN8T1qMKTc
zsnobWt09NrKfrLN5baHIpaK.Y1yEJ33rbn59GtfjCcG20G4Qu+V4yNhgwRA
27JpBoo61tK9ZSmYg7Npgg32PyttQ+01wPn81N7tpn7NghhPbtRd.+JZWd5F
igiImScj8+6Jtmj3Zl+LbXwoa6U03rnMrgvY9qpkIMm8y6aOr3zjn7vjvRTO
hlFFxYbMkXeIR+O2KUBpf4eIV+O2KkRhj5eIQ+O2KE52m3eIU+O2K456E1+R
l9e9W59ECdnL3gRgGJEdnD3gRfGJFdnX3ghfGJBdn1ep.fp.fp.fp.fp.fp.
fp.fp.fp.fp.fp7+B.pB.pB.pB.pB.pB.pB.pB.pB.pB.p69HAfJAfJAfJAf
JAfJAfJAfJAfJAfJAfJ8+B.pD.pD.pD.pD.pD.pD.pD.pD.pD.p6aH.fJ.fJ
.fJ.fJ.fJ.fJ.fJ.fJ.fJ.fJ7+B.p..p..p..p..p..p..p..p..p..p683.
P4.P4.P4.P4.P4.P4.P4.P4.P4.PKdR.P4.P4.P4.P4.P4.P4.P4.P4.P4.P
c+jA.kA.kA.kA.kA.kA.kA.kA.kA.kA.s3W.PY.PY.PY.PY.PY.PY.PY.PY.
PY.Pc2RJ.TJ.TJ.TJ.TJ.TJ.TJ.TJ.TJ.TJ.Tp+W.Po.Po.Po.Po.Po.Po.P
o.Po.Po.PceYB.TB.TB.TB.TB.TB.TB.TB.TB.TB.Th+W.PI.PI.PI.PI.PI
.PI.PI.PI.PI.PceLL.TL.TL.TL.TL.TL.TL.TL.TL.TL.Tr+W.Pw.Pw.Pw.
Pw.Pw.Pw.Pw.Pw.Pw.PcW.A.EA.EA.EA.EA.EA.EA.EA.EA.EA.E4+E.TD.T
D.TD.TD.TD.TD.TD.TD.TjGnH+g9F7m9OC7Eg6F7HfmKPL.EBjMfEG3.zBr.
fu.LKfCBrUfWCC.vnBLTYG5fgRX7EFzAIAP7.jY.AIP5BD4.4PmfIHoBhufL
MHnCR+vTBXdBL4AlQASyrS6fogvbSXBKLKFlZCy2Ak.flAPcAnCwoTAzx.pd
.8QfRJPyEnNCzwAJ9.sgfJRqJSPEJnWET1BZfA0xftZPANnUGT0C5+cFD.KD
fYCvVBXfAr5.lh.6SfQKvRFXdyZtCL+A1DACkf0SvjJXmEL9BVjAyzfsamwb
v5NXxG7C.bN.7X.bi.7s.b3.7BAbMw5pB35B3OC3jC34C3ND3iD33D3ME3hE
32kyQLvyLvcMvGNvwNvaOvEPvuPvYQvCRvsRqalfamfunfCpfWqfqrf+sfSu
fmvf6wfOyNmnAupAWsA+uAmxAO0A22Ae5AG8Au+gPBrgH.gL.wQ.AW.Qb.gg
.wl.Ar.Qw.g1.w63B.BhHBBSBhcBBnBhxBB8BhGCBRChbCBmymrJUIjTkPRU
BIUIjTkPRUBIUIjTkPRUBIUIjT9eV9jJgjpDRpRHoJgjpDRpRHoJgjpDRpRH
Y+yvRHEVBovRHEVBovRHEVBovRHEVBovRHEVBoP+OKeRkPJrDRgkPJrDRgkP
JrDRgkPJrDREoQw0wiMI0oyav6UKB9+9tnr39umYERDtDoVTB7XwUl0O46wR
fGiKJrU2V4ycvSQU2O3DuWC7cPMSk7bvOjfC9WMMX4f7WhWarYGDubarMiIe
G5aN9SM.W4chE2Zsw+a3B51cNI6aStj276w.WAceKRk2Puyw0Exw9t4D5doG
2c7VY0SvAwMJmJGlROdz10wp0s7u0MCiZXjS6y531Ib4Vj9Vb.C9ltNtcM.Y
YKqYcLZLeXJ9lqRFa6o+HFMpp7Xxapp6tsTLlLpHY7aK4B9auBFss03Jezbr
O11ZbUd+.T7czAnXk7qknGDySx+5.cdxDxp0mIvWYuom9trOSHcGidl91uoA
SD59k3dN1tmiswPPLXrxdRuwdSDEyntQXJ74wg1EaQS7ksEMe2krA+9tHjdu
yabiYswN+12kiu26MtkD05kI4h2gMeC7z.7zguwaPPNSNttvElbO62c5JKDV
soAvdSz4MtwF6sCkTNcP63DeWSTI82J6Ed+B2RcGwcXI0sSMQC9lgusco.7a
t7twFMIw5912+912+3o17sUWiAOvcMl6IicPSF6d6G85a0byHp1R0OfCnSFp
8Nt2iZL5vMOd6xBaGdBgVtacO8Qv64NhP8mz.kGQnt1dPsyHTaRGyi27IK4X
NyiKYUYZuriK1v7l6S0Fafw6hZ6ndzCU9AtUmvuE+eKRp9SoYy2qGLz3CrDR
es9wVp+PtVeMdUXdBIBNphDA+TmLvgBczsObzWcg8CBF4z6yaC5ZlOfpLztL
dQ75poFexpz4UyOr0m67WRl8Ysq2N1s1wvSz1IpPBUaQEQy8da9oWSxe4Sy1
k8k3CnN+u8rd6A6p+hNEu2b+J4zSBfyfZ6SFa6E7WamIQaKXwB3D58FWFHp.
OUQoTLsTIDiO0btRqjmtKVvkgHluX4CoLQ0xP+6baMgQGl1ZxY5aM0pW9S23
ZHroczoCPsGZWUI9ivVWCGOLiwEIQXeF8O8b9YOlrMm5CVaeXoiOdvwU2sNB
Q7Kaqf1zCn4wmmyV7Ts0LqUr8FrPbMr1syR2D+sRwkcOWfYN5L7UWhhTNtJl
5rTRqB6J9O7H1rST0+n7MmmE8517uVa8JmLKZ4rYo6b4KhbJu6NZFrbiCRUy
jzd5OazEh1LJzfBNTqrSW8gkoQ77JwkLTCgXT3naHbPGAYijQvlamQNe8SWp
gw5EO9pNhzsuDsAT5UY0czAnZZ.P5PpBZ5aE7uYho03DX.p+2CYliDDp2sFs
mLUVUxKuBWDrSWgKsLV8YKSzxDUoQyIWh83h2jVTHyjmx8WS0XX4yUtObkAj
gFyyTlw6RYOrO.WlrMWG0253kMN3Y9Hcc4IYJ.GqiQxqbri2cwEeZu81u5sN
s+dtrfe6t6s+SsiJJrQn+dB420CCpkooed2luEj+bix+aSVrVyMN9L.5kexb
okQJhLCq3Gew.a4r.U2MKXYxWhmtHJY82N1rf+uzk6VctXdX7xkj2lZH2FRC
S4mZdfm65mMTlFm5JcbFebkZVIu8nyIl8RjQYVyySnmLpYTM2tY9SSS4EJRG
d5rsbLQ55FcJs1bB6NeIZ4t3zmOrbJga+xj0e1LDVesZq9ARWu33iw09XaeI
MKuEethgUzQduUqboI6QITKe0e+Hq3o3nuax5jb8bfCYXG6S48sjVYQAq7g1
o+PkdXx9X0L1eUFVi+04Qy9FL0HMO0vGJYWuDubiopXO2jGoyBhNzRWJkXti
.sptoZyWoKkZR9obC9HY1jWpn9vWUSk8wlUXy.DC4a5jGgxp5.cQ5hNRhiZw
jGI9zNPuLclaD9ZTxsZ2x7jsKSlCd6VUK2A80xx3OVOOQ+iXUoW6DIi6ZHL5
ANdXibyFZqsgJ2oGoybrxed2TMqbahi9bsAPVnoex9vQeU0GYIwxJ+lzPB12
2UBEHWGdRS0J0YRpd8dV5LsZz4Q4QUG3pknW59T.uT3SwnXlu+gTv3zV.MMC
C74xZR4sSTb6jlP.7MGKsmjtdbhRQn7yJK68DhIbY.i6xLZ3w3ejhGGlwQgt
Ntjoi95ZiQbSGio9ia+72qjzPeCLY+WU8q4jGq8UoTSuxw2XlHg91wDQJEML
VKKenRCq10yoLL3GpP+sYlXgcRcfVGYtYCIIhrO4PKHGRnYRgqwLUzWjkZxh
bvHU+djeFG+4S5iW8S.va0Euhfb3xJBYWt6cRZu2umeZ2yZ8cFVS.FM4rKtV
erSU3glEHJPck9.KaHJdRGlS3+7A4HoIi3LKV39nrHE815KfkINYeel41vJd
CFT9AOfNNsvRQ2kV3l3t+6wOmd10SAypmxcVmmxcwQb8uOy3tT0+r1+XZ1lW
B9oc4oqhp5PiYMZOHgpmYsN0AoZip6HkE7MmUOtrLPqhvFoz9i0qX8Oq++0d
.Hrscmh3brOhYUWqwf5NDEEtDMHI8sBCEu+YsVxH+mWuxJc2dY5KRp2qugpB
qtD+T7EMzfOoTuaLgKjSKyDJE2iCMCft7sZF754Ay2kUSeSSgAgbcxhhxnHj
00ZV3gtpSxGnEh22Z0UcnV8MQURKeSxo9ihLmwQpOMuUJXmJIMnvE+Whlm9Z
UOaWjEMGWFbkNfJrqWLV5xtx6F+Yk909G5bd+wvSVLTD6rI2oVgmnCaNRp1R
ROEM6yKrqaVscp74G0BOy5tteMNUYs4vhJLwxPF0dnoboXQ6RHx0bUCULQXk
94XGUai9EN50j05Q0.7.TZi9jV6NyTwtjCc4k1HF0g01Xqlp32EJdaslbvXI
7vimhsQzrE2ZVyoNWeI9irV12wILjueyWrDe8c1iSBY+ZA2Kmb3N4oVCXoos
EPsJ.+vp+d+cCC2UVmLka2c4zoU+uDNuuXbT45+XuDPI6WL4GLInSgHCcFH1
gzS0MJPSaqA7fRNzwE4vGWjibbQNjyMaUNnji3LjCeX4NryPNjvAkbTmibDC
F4rmXZ2npWP40TfKr4KZOs5UKD7NDOsQsNavXuRdKnmATUQqnmAzrmjzFwO9
fQOhvVPOR7HjdvCC8zl4Wb5vweZC8fICmwu8ry1vNfWMbzSalvKGtALtpEN5
FNbJf3xQF8HFYzCejQOsweE5vMemiZA+QNbFvZyz8gy6RV33h6vjiL5QzhgK
BsVDL8J8vZK8PGF5g1F2UIC23EoExOXzv4eHC21ALxvPOsIsZ3gKZ61HOObS
2ogiKwYZa7dVRtrf+kHWeNJzscxp8m8P.+TYOfgPJ2s11gx5fP1Sfn01AFHA
CVWvT6P5oM1AvCWZcnsIsEzga7hzFEKjgKpSRenXQgCmNfyIIsJR9gyWZRqz
QLbFyH7dXLFij3AcPt0N7xGFlZaTzIFvIxsgd3CmhWBoGVtBlvtWSDDq9kZq
Sg4R8fXGtU5qGN6q3VkF0gSWGV11okCSZuwsQ2Kd3z81N5gcF9ywKPCrvVEP
LJy1HtEzdo9Kv7tHTnii.hqYvvHXW0yo5GDzFSGzgKTWbq7Qd3LcfakCThAj
AQFWI+yVde2twrtjfvcgYo8stVwdJmic6cDmEW2e1GyMaSZnFPIu1nq6ZSZn
qZ+16zCxPI6cpAs2IFzgmVPMcRAoeN+yO9+C.igRm

continue atomic
    end waveshaping




